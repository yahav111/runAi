# RunIsrael AI — סקירת פעולות למשתמש

מסמך זה מתאר את **כל הפעולות** שהמשתמש יכול לבצע באפליקציה. מתאים להצגה ולהעברת מידע (כולל להנהלה).

---

## 1. כניסה ראשונית והגדרת פרופיל

| פעולה | תיאור |
|--------|--------|
| **הזנת שם** | במסך הפתיחה (Welcome) — המשתמש מזין את שמו (למשל "יossi"). |
| **בחירת רמת ריצה** | בחירה מתוך: Beginner / Intermediate / Advanced. משפיעה על התאמת המסלולים והמרחקים. |
| **אישור והמשך** | לחיצה על "Let's Run" — הפרופיל נשמר (localStorage) והדיאלוג נסגר. |

**הערה:** מסך ה-Welcome מופיע רק למשתמש חדש (אין פרופיל שמור). בראש העמוד מוצגים תמיד השם ורמת הריצה.

---

## 2. בחירת אופן תכנון המסלול (מצבי שיחה)

במסך הבית, לפני שמתחילים שיחה, מוצגות **שלוש כרטיסיות (Mode Cards)**:

| מצב | כותרת | פעולה | מה קורה אחרי הלחיצה |
|-----|--------|--------|------------------------|
| **A to B Route** | מסלול מנקודה לנקודה | המשתמש לוחץ על הכרטיס | נשלחת הודעה: "I want to plan a point-to-point run. Where should I start and finish?" — הבוט שואל מאיפה ולאן. |
| **Circular Loop** | מסלול מעגלי | המשתמש לוחץ על הכרטיס | נשלחת הודעה: "I want a circular loop run. I'll tell you where and how far." — הבוט מתמקד במקום ומרחק. |
| **Tailor-made Run** | מסלול מותאם אישית | המשתמש לוחץ על הכרטיס | נשלחת הודעה: "Help me find a tailor-made running route in Israel." — הבוט מוביל סקר קצר (עיר, גובה, מים, צל, מרחק וכו'). |

כל לחיצה שולחת את הטקסט המתאים כהודעה ראשונה לצ'אט ומתחילה את השיחה עם ה-AI.

---

## 3. שיחה עם הבוט (צ'אט)

| פעולה | תיאור |
|--------|--------|
| **הקלדת הודעה חופשית** | המשתמש כותב בשדה הטקסט בתחתית המסך (למשל "מדיזנגוף עד החוף", "5 ק"מ בתל אביב", "רוצה מסלול שטוח עם צל"). |
| **שליחת הודעה** | לחיצה על כפתור החץ (↑) או Enter — ההודעה נשלחת ל-API והבוט מגיב (טקסט + לעיתים כרטיסי מסלול). |
| **צפייה בתשובת הבוט** | התשובות מוצגות כבועיות: הודעות המשתמש בירוק, הודעות הבוט עם אייקון וטקסט (ולעיתים כרטיסי מסלול). |
| **גלילה** | אזור הצ'אט ניתן לגלילה כדי לראות היסטוריית שיחה מלאה. |

בזמן טעינה (אחרי שליחת הודעה) מוצג "Mapping your route..." והשדה מושבת.

---

## 4. צ'יפים (בחירות מהירות)

אחרי תשובת הבוט, לעיתים מופיעים **צ'יפים** — כפתורים לבחירה מהירה לפי נושא השאלה:

| קטגוריה | דוגמאות צ'יפים |
|---------|-----------------|
| **עיר** | Tel Aviv, Jerusalem, Haifa, Eilat |
| **גובה/תוואי** | Flat, Rolling Hills, Steep Climbs |
| **מים** | Yes, need water / No, I carry my own |
| **נגישות** | Stroller-friendly, Dog-friendly, Neither needed |
| **צל** | Full Shade, Partial Shade, Open / No Preference |
| **סוג מסלול** | Circular Loop, Point-to-Point |
| **משטח** | Asphalt, Trails, Sand, Mixed |
| **מרחק** | Short (up to 4 km), Medium (4–8 km), Long (8+ km) |
| **איפוס** | Start Over (מנקה את השיחה ומתחיל מחדש) |

| פעולה | תיאור |
|--------|--------|
| **לחיצה על צ'יפ** | הטקסט של הצ'יפ נשלח כהודעה לבוט (בלי להקליד). הצ'יפים מתחבאים אחרי הלחיצה. |
| **"Start Over"** | מנקה את כל הודעות השיחה ומציג שוב את כרטיסיות המצבים (Mode Cards). |

הצ'יפים מופיעים רק אחרי תשובת assistant, כשעדיין לא הוצגו מסלולים (או אחרי מסלולים — רק "Start Over").

---

## 5. כרטיס מסלול (Route Card)

כשהבוט מחזיר מסלולים, הם מוצגים כ**כרטיסים** עם כל הפרטים. על כל כרטיס אפשר לבצע:

| פעולה | תיאור |
|--------|--------|
| **צפייה בפרטי המסלול** | שם, מרחק, סוג (Loop / Point-to-Point), משטח, תיאור, התחלה/סיום/נקודת ביניים, Highlights, Post-run treat. |
| **Navigate to Start** | פתיחת Google Maps לניווט לנקודת ההתחלה (בדפדפן/אפליקציה). |
| **Navigate to End** | פתיחת Google Maps לניווט לנקודת הסיום (כשהרלוונטי). |
| **View Full Route / View route to turnaround** | פתיחת Google Maps עם מסלול מלא מההתחלה לסיום (או עד נקודת ה-turnaround). |
| **Share route** | שיתוף המסלול ב-WhatsApp (טקסט + קישור להתחלה). |

המרחק המוצג בכרטיס מתוקן אוטומטית אם המרחק האמיתי (לפי API) שונה משמעותית מהמרחק שסופק (עד 30% tolerance).

---

## 6. טיפול בשגיאות ומצב טעינה

| פעולה / מצב | תיאור |
|-------------|--------|
| **הודעת שגיאה** | אם ה-API נכשל, מוצגת תיבת שגיאה אדומה עם הודעת השגיאה. |
| **חסימת שליחה בזמן טעינה** | בזמן "Mapping your route..." אי אפשר לשלוח הודעה חדשה והצ'יפים מושבתים. |

---

## 7. סיכום זרימת פעולות (להצגה)

1. **כניסה** → Welcome (שם + רמה) → "Let's Run".
2. **בחירת מצב** → A to B / Circular Loop / Tailor-made (לחיצה על כרטיס).
3. **שיחה** → הקלדה חופשית ו/או בחירת צ'יפים → קבלת תשובות וטקסט.
4. **מסלולים** → צפייה בכרטיסים → ניווט (Start/End/Full Route) או שיתוף ב-WhatsApp.
5. **איפוס** → "Start Over" → חזרה למצב בחירת כרטיסים.

---

## 8. מה המשתמש לא יכול לעשות (בגרסה נוכחית)

- אין שמירת מסלולים ל"רשימת מועדפים" בתוך האפליקציה.
- אין תזכורת או אינטגרציה ללוח שנה.
- אין קלט קולי (Voice).
- אין שימוש אוטומטי במיקום GPS כנקודת התחלה.
- אין "מסלול דומה" או "הפתעה" על כרטיס קיים (רק המשך שיחה בטקסט).

---

*מסמך זה מתאר את המצב הנוכחי של האפליקציה. עוד רעיונות לפיתוח עתידי מתועדים ב־`UX_LLM_REVIEW.md`.*
